<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ - Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…Ø³Ø¬Ø¯</title>
</head>
<body>
  <h1>ğŸ“š Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯</h1>
  <form id="addBookForm">
    <input type="text" id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØªØ§Ø¨" required />
    <input type="text" id="author" placeholder="Ø§Ù„Ù…Ø¤Ù„Ù" required />
    <input type="text" id="edition" placeholder="Ø§Ù„Ø·Ø¨Ø¹Ø© / Ø¯Ø§Ø± Ø§Ù„Ù†Ø´Ø±" />
    <input type="text" id="volumes" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ / Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª" />
    <textarea id="description" placeholder="Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„ÙƒØªØ§Ø¨"></textarea>
    <input type="url" id="image" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" />
    <button type="submit">â• Ø¥Ø¶Ø§ÙØ©</button>
  </form>

  <script>
    const BIN_ID = '685034bc8a456b7966af2098';
    const API_KEY = '$2a$10$u.ctsiHw.Bh4qmg3Cs4s2.EnoyntfM855T9XwIzbumqM8eNqGv9Zy';

    async function getBooks() {
      const res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
        headers: { 'X-Master-Key': API_KEY }
      });
      const data = await res.json();
      return data.record.books || [];
    }

    async function saveBooks(books) {
      await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
          'X-Master-Key': API_KEY
        },
        body: JSON.stringify({ books })
      });
    }

    document.getElementById('addBookForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const title = document.getElementById('title').value;
      const author = document.getElementById('author').value;
      const edition = document.getElementById('edition').value;
      const volumes = document.getElementById('volumes').value;
      const description = document.getElementById('description').value;
      const image = document.getElementById('image').value;

      const books = await getBooks();
      books.push({ title, author, edition, volumes, description, image });
      await saveBooks(books);
      alert("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ù†Ø¬Ø§Ø­");
      document.getElementById('addBookForm').reset();
    });
  </script>
</body>
</html>
